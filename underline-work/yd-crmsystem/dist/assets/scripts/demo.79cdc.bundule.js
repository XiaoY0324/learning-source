(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{14:function(e,t,o){},23:function(e,t,o){"use strict";o.r(t);o(14);var r=o(0),n=o(3),a=o(1);class l{constructor(){this.todos=[{id:1,text:"完成React SSR配置",completed:!0},{id:2,text:"完成业务逻辑的基本开发",completed:!1}],this.id=0,this.test=async()=>{const e=await fetch("/api/test"),t=await e.json();this.id=t.id},this.toggleTodo=e=>{this.todos[e].completed=!this.todos[e].completed}}get remainingTodos(){return this.todos.filter(e=>!e.completed).length}}Object(a.decorate)(l,{todos:a.observable,id:a.observable,remainingTodos:a.computed});var s=Object(r.createContext)(new l);var c=function({todos:e,toggleTodo:t}){return r.createElement("ul",{style:{listStyle:"none"}},e&&e.map((e,o)=>r.createElement("li",{onClick:()=>t(o),style:{margin:10,opacity:e.completed?.5:1,cursor:"pointer",textDecoration:e.completed?"line-through":"none"},key:e.id},e.text)))};var i=({remaining:e,total:t})=>r.createElement("p",null,e," / ",t," left");const d=e=>{const t=new Error(`${e.status} ${e.statusText}`);return t.name="FetchError",t},u={loading:!1,error:null,data:null},m=(e,t)=>{switch(t.type){case"init":return u;case"start":return e.loading?e:{...e,loading:!0};case"data":return e.loading?{...e,loading:!1,data:t.data}:e;case"error":return e.loading?{...e,loading:!1,error:t.error}:e;default:throw new Error("no such action type")}},p=()=>{let e;const t=new Promise(t=>{e=t});return{resolve:e,promise:t}},g={},h=e=>e.json(),{useContext:w,Suspense:y}=r,E=()=>{const{error:e,data:t}=((e,t=g)=>{const[o,n]=Object(r.useReducer)(m,u),a=Object(r.useMemo)(p,[e,t]);if(Object(r.useLayoutEffect)(()=>{let o=e=>n(e);const r=new AbortController;return(async()=>{if(e){o({type:"start"});try{const{readBody:n=h,...a}=t,l=await fetch(e,{...a,signal:r.signal});if(l.ok){const e=await n(l);o({type:"data",data:e})}else o({type:"error",error:d(l)})}catch(e){o({type:"error",error:e})}a.resolve()}})(),()=>{o=()=>null,r.abort(),n({type:"init"})}},[e,t,a]),o.loading)throw a.promise;return o})("http://...");return e?r.createElement("span",null,"Error:",e.message):t?r.createElement("span",null,"RemoteData:",t):null},b=Object(n.a)(e=>{console.log("传参",e.match.params.id);const t=w(s);return r.createElement("div",null,r.createElement(y,{fallback:r.createElement("span",null,"Loading...")},r.createElement(E,null)),r.createElement(c,{todos:t.todos,toggleTodo:t.toggleTodo}),r.createElement(i,{remaining:t.remainingTodos,total:t.todos.length}),r.createElement("h3",null,t.id),r.createElement("input",{type:"button",value:"测试异步请求",onClick:()=>t.test()}))});t.default=b}}]);